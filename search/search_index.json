{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"TwoFactorX","text":"<p>Add a two-factor authentication to MODX.</p>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>MODX Revolution 2.8+</li> <li>PHP 7.4+</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Add a two-factor authentication to the MODX manager.</li> <li>Secure the front end login with a pre-hook for the \"Login\" extra.</li> <li>Generate a QR Code for saving the authenticator secret with a snippet.</li> <li>Login into the manager without two-factor authentication until the authenticator secret is verified.</li> </ul>"},{"location":"#license","title":"License","text":"<p>The project is licensed under the GPLv2 license.</p>"},{"location":"#translations","title":"Translations","text":"<p>Translations of the package can be made for the Default Lexicon, the Email Lexicon, the Properties Lexicon, the Permissions Lexicon and the System Setting Lexicon</p>"},{"location":"contributors/","title":"Contributors","text":"<p>The TwoFactorX project was started in 2023 by Thomas Jakobi as a complete rewite of the GoogleAuthenticatorX package by Mina Gerges.</p>"},{"location":"contributors/#reasons-for-the-fork","title":"Reasons for the fork","text":"<p>The primary reason for the rewrite was the usage of an external service to create the QR code. This is insecure and should not be used for sites, where absolute security is needed. The current code uses an internal QR code generation.</p> <p>The name change was made because the authentication code can be used with other two-factor authentication applications such as Authy, 1Password etc.</p> <p>The other code changes are the follwing:</p> <ul> <li>MODX 3 compatibility</li> <li>code simplification</li> <li>common code structure for better use of the MODX API</li> <li>rename some system settings</li> <li>use MODX permissions in the user edit page and in the processors</li> <li>use Composer for the third party software</li> </ul> <p>Many thanks to all who contributed, whether by creating pull requests, submitting bug reports, or donating.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#install-from-modx-extras","title":"Install from MODX Extras","text":"<p>Search for TwoFactorX in the Package Manager of your MODX installation and install it in there.</p>"},{"location":"installation/#manual-installation","title":"Manual installation","text":"<p>If you can't access the MODX Extras Repository in your MODX installation, you can manually install TwoFactorX.</p> <ul> <li>Download the transport package from MODX Extras (or one of the pre-built transport packages in _packages)</li> <li>Upload the zip file to your MODX installation's <code>core/packages</code> folder or upload it manually in the MODX Package Manager.</li> <li>In the MODX Manager, navigate to the Package Manager page, and select 'Search locally for packages' from the dropdown button.</li> <li>TwoFactorX should now show up in the list of available packages. Click the corresponding 'Install' button and follow the instructions to complete the installation.</li> </ul>"},{"location":"installation/#build-it-from-source","title":"Build it from source","text":"<p>To build and install the package from source you could use Git Package Management. The GitHub repository of TwoFactorX contains a config.json to build that package locally. Use this option, if you want to debug TwoFactorX and/or contribute bugfixes and enhancements.</p>"},{"location":"usage/","title":"Usage","text":""},{"location":"usage/#snippets","title":"Snippets","text":"<p>There are two snippets included in the package.</p>"},{"location":"usage/#twofactorxlogin","title":"TwoFactorXLogin","text":"<p>This pre-hook can be used ass two-factor authentication pre-hook to secure the login snippet. It uses the following properties:</p> Property Description Default twofactorxErrorMsg Alternative error message, if the authentication code does not match. - <p>The authentication code for the two-factor authentication is requested in the field with the name <code>code</code>. If you add the attribute <code>autocomplete=\"one-time-code\"</code> to the input, tools like 1Password will fill the field automatically.</p>"},{"location":"usage/#userqrcode","title":"UserQRcode","text":"<p>This snippet creates a two-factor authentication QR code. It uses the following properties:</p> Property Description Default placeholderPrefix The prefix for the placeholders set by the snippet. twofactorx userid The id of the user the QR code is created for. Current user id <p>The following additional placeholders are set by the snippet:</p> Placeholder Description secret The secret used to create a time-based one-time password (TOTP) in an authentication application. uri The URI used to create the QR code for an authentication application. qrsvg The HTML code of an SVG that displays the QR code that can be scanned with an authentication application."},{"location":"usage/#system-settings","title":"System Settings","text":"<p>TwoFactorX uses the following system settings in the namespace <code>twofactorx</code>.</p> Key Name Description Default twofactorx.debug Debug Log debug information in the MODX error log. No twofactorx.enable_2fa Enable Two-Factor Authentication If you enable the two-factor authentication, the manager login is secured with an additional TOTP authentication code. No twofactorx.encryption_key Encryption Key Encryption key that is used for the encryption of the 2FA data. Do not change. - twofactorx.issuer QR Code Issuer Specify the value of the issuer in the QR code. <code>site_name</code> twofactorx.show_in_profile Show Secret In User Profile Allow manager users to see the QR code and the secret for two-factor authentication in their user profile. No"},{"location":"usage/#permissions","title":"Permissions","text":"<p>TwoFactorX has the following permissions for manager users:</p> Permission Description twofactorx_edit Allow a user to manage the TwoFactorX data the user edit page. <p>The permission check is not executed for sudo users.</p>"}]}