/*!
 * TwoFactorX - Two-factor authentication for MODX
 * Version: 1.1.1
 * Build date: 2025-07-09
 */
Ext.onReady(function(){new MODx.Window({title:_("twofactorx"),url:TwoFactorX.config.connectorUrl,action:"mgr/user/verifytotp",saveBtnText:_("twofactorx.verify"),collapsible:!1,maximizable:!1,modal:!0,width:430,autoHeight:!0,fields:[{style:"margin-top: 15px",html:"<p>"+_("twofactorx.verifytotp_notification")+"</p>"},{layout:"column",items:[{columnWidth:.5,layout:"form",items:[{style:"margin-top: 15px; width: 200px; height: 200px;",html:'<img id="verifytotp-qrcode" class="twofactorx-loading" src="" alt="'+_("twofactorx.qrcode")+'" width="200" height="200"/>'}]},{columnWidth:.5,layout:"form",items:[{xtype:"field",fieldLabel:_("twofactorx.secret"),id:"verifytotp-secret",submitValue:!1,readOnly:!0,anchor:"100%"}]}]},{style:"margin-top: 15px",html:"<p>"+_("twofactorx.verifytotp_instruction")+"</p>"},{xtype:"field",fieldLabel:_("twofactorx.key"),name:"key",id:"verifytotp-key",anchor:"100%"},{xtype:"hidden",name:"userid",value:MODx.request.id}],listeners:{afterrender:function(){TwoFactorX.util.getUserQRCode("verifytotp-secret","verifytotp-qrcode")}}}).show(Ext.getBody())});